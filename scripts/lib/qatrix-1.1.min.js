/* Qatrix 1.1 - Angel Lai - MIT license http://qatrix.com */
(function(r,j,l){var s=j.documentElement,C=/(^\n+)|(\n+$)/g,M=/^(?:\{.*\}|\[.*\])$/,N=/-([a-z])/ig,O=/\r\n/g,P=/[\-\+0-9\.]/ig,v=/\s+/,Q=/\?/,R=/opacity=([^)]*)/,S=/^[\],:{}\s]*$/,T=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,U=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,V=/(?:^|:|,)(?:\s*\[)+/g,D=["height","margin-top","margin-bottom","padding-top","padding-bottom"],E={},F={},G=[],H=function(){$each(G,function(a,b){b()});j.removeEventListener("DOMContentLoaded",H,!1)},u=function(a,b){var c=typeof b;if("string"===c){var e=(a&&a.ownerDocument||j).createDocumentFragment(),f=$new("div");for(f.innerHTML=b;null!=f.childNodes[0];)e.appendChild(f.childNodes[0]);b=e}"number"===c&&(b+="");return b},d=function(a,b){if(null!==a){if(b===l)return a;var c=0,e=a.length;if(e!==l){if(0<e)for(;c<e&&!1!==b.call(a[c],a[c],a[c++]););return a}return b.call(a,a)}},I=function(a,b,c,e){return d(a,function(a){var m={},h="show"===b,d=a.style,n=a._display,l;if(!n){n=$style.get(a,"display");if("none"===n||"inherit"===n)l=$append(j.body,$new(a.nodeName)),n=$style.get(l,"display"),$remove(l);a._display=n}h?d.display=n:n="none";c?($style.get(a,"overflow"),d.overflow="hidden",m.opacity=h?{from:0,to:1}:{from:1,to:0},$each(D,function(c,b){m[b]=h?{from:0,to:$style.get(a,b)}:0}),$animate(a,m,c,function(){$each(D,function(c,b){$css.set(a,b,"")});d.filter=d.opacity=d.overflow="";d.display=n;e&&e.call(a)})):d.display=n})},J=function(a,b){if("object"===typeof b){var c=[];$each(b,function(b,f){"object"===typeof f?c.push(J(a+"["+b+"]",f)):c.push(a+"["+$url(b)+"]="+$url(f))});return c.join("&")}return $url(a)+"="+$url(b)},K=j.removeEventListener?function(a,b,c){a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent("on"+b,c)},W=j.getElementsByClassName?function(a,b,c){return d(a.getElementsByClassName(b),c)}:function(a,b,c){var e=[],f=RegExp("(^|\\s)"+b+"(\\s|$)");$tag(a,"*",function(c){f.test(c.className)&&e.push(c)});return d(e,c)},X=j.querySelectorAll?function(a,b){return d(j.querySelectorAll(a),b)}:function(a,b){var c=g.Qselector.styleSheet,e=[];c.addRule(a,"q:a");$tag(j,"*",function(c){"a"===c.currentStyle.q&&e.push(c)});c.cssText="";return d(e,b)},Y={camelCase:function(a){return a.replace("-ms-","ms-").replace(N,function(b,c){return(c+"").toUpperCase()})},replace:function(a,b){for(var c in b)a=a.replace(RegExp(c,"ig"),b[c]);return a},slashes:function(a){return $string.replace(a,{"\\\\":"\\\\","\b":"\\b","\t":"\\t","\n":"\\n","\r":"\\r",'"':'\\"'})},trim:"".trim?function(a){return a.trim()}:function(a){return(a+"").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}},Z=r.localStorage?{set:function(a,b){localStorage[a]="object"===typeof b?$json.encode(b):b},get:function(a){a=localStorage[a];return $json.isJSON(a)?$json.decode(a):a||""},remove:function(a){localStorage.removeItem(a);return!0}}:{set:function(a,b){b="object"===typeof b?$json.encode(b):b;$data.set(g.storage,a,b);g.storage.save("Qstorage")},get:function(a){g.storage.load("Qstorage");return $data.get(g.storage,a)||""},remove:function(a){g.storage.load("Qstorage");$data.remove(g.storage,a);return!0}},aa={get:r.getComputedStyle?function(a,b){if(null!==a){var c=j.defaultView.getComputedStyle(a,null).getPropertyValue(b);return"auto"===c||""===c?0:c}return!1}:function(a,b){if(null!==a){var c="opacity"===b?R.test(a.currentStyle.filter)?0.01*parseFloat(RegExp.$1)+"":1:a.currentStyle[$string.camelCase(b)];return"auto"===c?0:c}return!1},set:s.style.opacity!==l?function(a,b,c){return d(a,function(a){a.style[b]=c;return!0})}:function(a,b,c){return d(a,function(a){if(!a.currentStyle||!a.currentStyle.hasLayout)a.style.zoom=1;"opacity"===b?(a.style.filter="alpha(opacity="+100*c+")",a.style.zoom=1):a.style[b]=c;return!0})}},p;p=s.style;if(p.webkitTransition!==l||p.MozTransition!==l||p.OTransition!==l||p.msTransition!==l||p.transition!==l){p=s.style;var L=(p.webkitTransition!==l?"Webkit":p.MozTransition!==l?"Moz":p.OTransition!==l?"O":p.msTransition!==l?"ms":"")+"Transition";p=function(a,b,c,e){return d(a,function(a){var m=[],h=[],d=[],n=[],j=a.style,k;c=c||300;for(k in b)h[k]=$string.camelCase(k),b[k].from!==l?(b[k].to=b[k].to||0,m[k]=!$css.number[k]?parseInt(b[k].to,10):b[k].to,d[k]=$css.unit(k,b[k].to),$style.set(a,h[k],parseInt(b[k].from,10)+d[k])):(m[k]=!$css.number[k]?parseInt(b[k],10):b[k],d[k]=$css.unit(k,b[k]),$style.set(a,h[k],$style.get(a,h[k]))),n.push(k);setTimeout(function(){j[L]="all "+c+"ms";$each(n,function(a,c){j[h[c]]=m[c]+d[c]})},15);setTimeout(function(){j[L]="";e&&e.call(a)},c);return a})}}else p=function(a,b,c,e){return d(a,function(a){var m=0,h=0,d=0,n=0,j=[],k=[],t=[],g=[],p=[],q;c=c||300;for(q in b)t.push($string.camelCase(q)),b[q].from!==l?(d=b[q].to,k.push(!$css.number[q]?parseInt(b[q].from,10):b[q].from),$style.set(a,t[h],k[h]+$css.unit(q,d))):(d=b[q],k.push(parseInt($style.get(a,$string.camelCase(q)),10))),j.push(!$css.number[q]?parseInt(d,10):d),g.push($css.unit(q,d)),h++,n++;for(d=0;30>d;d++){p[d]=[];for(h=0;h<n;h++)p[d][t[h]]=k[h]+(j[h]-k[h])/30*d+("opacity"===t[h]?"":g[h])}for(;30>h;h++)setTimeout(function(){for(h=0;h<n;h++)$style.set(a,t[h],p[m][t[h]]);m++},c/30*h);setTimeout(function(){for(h=0;h<n;h++)$style.set(a,t[h],j[h]+g[h]);e&&e.call(a)},c);return a})};for(var ba={decode:r.JSON?function(a){return $json.isJSON(a)?JSON.parse($string.trim(a)):!1}:function(a){return $json.isJSON(a)?(new Function("return "+$string.trim(a)))():!1},encode:r.JSON?function(a){return JSON.stringify(a)}:function(a){a:{var b=[],c,e,f,m;for(c in a){f=a[c];e=typeof f;if("undefined"===e){a=void 0;break a}if("function"!==e){switch(e){case "object":m=null===f?f:f.getDay?'"'+(1E3-10*~f.getUTCMonth()+f.toUTCString()+1E3+f/1).replace(/1(..).*?(\d\d)\D+(\d+).(\S+).*(...)/,"$3-$1-$2T$4.$5Z")+'"':f.length?"["+function(){var a=[];$each(f,function(c,b){a.push("string"===typeof b?'"'+$string.slashes(b)+'"':b)});return a.join(",")}()+"]":$json.encode(f);break;case "number":m=!isFinite(f)?null:f;break;case "boolean":case "null":m=f;break;case "string":m='"'+$string.slashes(f)+'"'}b.push('"'+c+'":'+m)}}a=b.join(",")}return"{"+a+"}"},isJSON:function(a){return"string"===typeof a&&""!==$string.trim(a)?S.test(a.replace(T,"@").replace(U,"]").replace(V,"")):!1}},y=navigator.userAgent.toLowerCase(),w={},z="msie firefox opera webkit iPad iPhone android".split(" "),A=z.length,x=6;A--;)w[z[A]]=-1<y.indexOf(z[A].toLowerCase());for(;12>x;x++)w["msie"+x]=-1<y.indexOf("msie "+x);w.is=function(a){return RegExp(a,"ig").test(y)};var g={$:function(a){return j.getElementById(a)},$each:function(a,b){var c=0,e=a.length,f=typeof a,m;if("array"===f||"object"===f&&e-1 in a)for(;c<e&&!1!==b.call(a[c],c,a[c++]););else if("object"===f)for(m in a)b.call(a[m],m,a[m]);else b.call(a,0,a);return a},$id:function(a,b){var c=[],e;$each(a instanceof Array?a:a.split(" "),function(a,b){e=$(b);null!==e&&c.push(e)});return b?d(c,b):c},$dom:function(a,b){b&&(a.length?d(a,b):b(a));return a},$tag:function(a,b,c){return d(a.getElementsByTagName(b),c)},$class:W,$select:X,$new:function(a,b){var c=j.createElement(a);if(b)try{return $each(b,function(a,b){switch(a){case "css":case "style":$css.set(c,b);break;case "innerHTML":case "html":$html(c,b);break;case "className":case "class":$className.set(c,b);break;case "text":$text(c,b);break;default:$attr.set(c,a,b)}}),c}catch(e){}finally{c=null}return c},$string:Y,$attr:{get:function(a,b){return a.getAttribute(b)},set:function(a,b,c){return d(a,function(a){a.setAttribute(b,c)})},remove:function(a,b){return d(a,function(a){a.removeAttribute(b)})}},$data:{get:function(a,b){var c=$attr.get(a,"data-"+b);return"true"===c?!0:"false"===c?!1:"null"===c?"":null===c?"":""===c?"":!isNaN(parseFloat(c))&&isFinite(c)?+c:M.test(c)?$json.decode(c):c},set:function(a,b,c){return d(a,function(a){c="object"===typeof c?$json.encode(c):c;"object"===typeof b?$each(b,function(b,c){$attr.set(a,"data-"+b,c)}):$attr.set(a,"data-"+b,c);return a})},remove:function(a,b){return d(a,function(a){$attr.remove(a,"data-"+b)})}},$storage:Z,$event:{guid:0,global:{},handler:{call:function(a,b,c,e){a=$event.handler;c.currentTarget=b;if(!1===e||!1===e.call(b,c))a.stopPropagation.call(c),a.preventDefault.call(c)},preventDefault:function(){var a=this.originalEvent;a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){this.stopPropagation()},mouseenter:function(a){return function(b){var c=b.relatedTarget;if(this!==c){for(;c&&c!==this;)c=c.parentNode;c!==this&&a.call(this,b)}}}},on:function(a,b,c,e,f){return d(a,function(a){if(3===a.nodeType||8===a.nodeType)return!1;if("object"===typeof b){"string"!==typeof c&&(e=e||c,c=l);for(type in b)$event.on(a,type,c,e,b[type]);return this}null==e&&null==f?(f=c,e=c=l):null==f&&("string"===typeof c?(f=e,e=l):(f=e,e=c,c=l));a.guid===l&&($event.guid++,a.guid=$event.guid,$event.global[$event.guid]={});var d=a.guid,g=(c||"")+b;$event.global[d][g]||($event.global[d][g]={});delegate_fn=function(b){var d={},h,g;$each("altKey bubbles button buttons cancelable relatedTarget clientX clientY ctrlKey fromElement offsetX offsetY pageX pageY screenX screenY shiftKey toElement timeStamp".split(" "),function(a,c){b[c]!==l&&(d[c]=b[c])});d.originalEvent=b;d.preventDefault=$event.handler.preventDefault;d.stopPropagation=$event.handler.stopPropagation;d.stopImmediatePropagation=$event.handler.stopImmediatePropagation;d.data=e;g=d.target=!c?a:b.target||b.srcElement||j;d.which=b.which||b.charCode||b.keyCode;d.metaKey=b.metaKey||b.ctrlKey;if(c)for(h=c?c.replace(".",""):"";g!==a;g=g.parentNode){if(null===g||g===j.body)return!1;(g.tagName.toLowerCase()===c||$className.has(g,h))&&$event.handler.call(b,g,d,f)}else $event.handler.call(b,g,d,f)};if(a.addEventListener){if("mouseenter"===b||"mouseleave"===b)b="mouseenter"===b?"mouseover":"mouseout",delegate_fn=$event.handler.mouseenter(delegate_fn);a.addEventListener(b,delegate_fn,"blur"===b||"focus"===b)}else a.attachEvent("on"+b,delegate_fn);$event.global[d][g][f+""]=delegate_fn;return a})},off:function(a,b,c,e){if("object"===typeof b){for(type in b)$event.off(a,type,b[type]);return this}null==e&&(e=c,c=null);var f=a.guid;c=(c||"")+b;fn_key=e+"";e?(K(a,b,$event.global[f][c][fn_key]),delete $event.global[f][c][fn_key]):($each($event.global[f][c],function(c,e){K(a,b,e)}),delete $event.global[f][c])}},$clear:function(a){a&&(clearTimeout(a),clearInterval(a));return null},$ready:function(a){if("complete"===j.readyState)return setTimeout(a,1);if(j.addEventListener)G.push(a),j.addEventListener("DOMContentLoaded",H,!1);else{var b=function(){try{s.doScroll("left")}catch(c){setTimeout(b,1);return}a()};b()}},$css:{get:function(a,b){if("object"===typeof b){var c={};$each(b,function(b,f){c[f]=$style.get(a,f)});return c}return $style.get(a,b)},set:function(a,b,c){return d(a,function(a){"object"===typeof b?$each(b,function(b,c){$style.set(a,$string.camelCase(b),$css.fix(b,c))}):$style.set(a,$string.camelCase(b),$css.fix(b,c));return a})},number:{fontWeight:!0,lineHeight:!0,opacity:!0,zIndex:!0},unit:function(a,b){if($css.number[a])return"";var c=(b+"").replace(P,"");return""===c?"px":c},fix:function(a,b){"number"===typeof b&&!$css.number[a]&&(b+="px");return null===b&&isNaN(b)?!1:b}},$style:aa,$pos:function(a,b,c){return d(a,function(a){$style.set(a,"left",b+"px");$style.set(a,"top",c+"px");return a})},$offset:function(a){var b=j.body,c=a.getBoundingClientRect();return{top:c.top+(r.scrollY||b.parentNode.scrollTop||a.scrollTop)-(s.clientTop||b.clientTop||0),left:c.left+(r.scrollX||b.parentNode.scrollLeft||a.scrollLeft)-(s.clientLeft||b.clientLeft||0),width:a.offsetWidth,height:a.offsetHeight}},$append:function(a,b){return d(a,function(a){return a.appendChild(u(a,b))})},$prepend:function(a,b){return d(a,function(a){return a.firstChild?a.insertBefore(u(a,b),a.firstChild):a.appendChild(u(a,b))})},$before:function(a,b){return d(a,function(a){return a.parentNode.insertBefore(u(a,b),a)})},$after:function(a,b){return d(a,function(a){return a.nextSibling?a.parentNode.insertBefore(u(a,b),a.nextSibling):a.parentNode.appendChild(u(a,b))})},$remove:function(a){return d(a,function(a){$empty(a);a.guid!==l&&delete $event.global[a.guid];return null!==a&&a.parentNode?a.parentNode.removeChild(a):a})},$empty:function(a){return d(a,function(a){for(;a.firstChild;)1===a.nodeType&&a.guid!==l&&delete $event.global[a.guid],a.removeChild(a.firstChild);return a})},$html:function(a,b){return d(a,function(a){if(b){try{a.innerHTML=b}catch(e){$append($empty(a),b)}return a}return 1===a.nodeType?a.innerHTML:null})},$text:function(a,b){return d(a,function(a){if(b)return $empty(a),a.appendChild(j.createTextNode(b)),a;var e="",f=a.textContent;if((f||a.innerText)===a.innerHTML)e=f?$string.trim(a.textContent.replace(C,"")):a.innerText.replace(O,"");else for(a=a.firstChild;a;a=a.nextSibling)if(f=a.nodeType,3===f&&""!==$string.trim(a.nodeValue)&&(e+=a.nodeValue.replace(C,"")+(a.nextSibling&&a.nextSibling.tagName&&"br"!==a.nextSibling.tagName.toLowerCase()?"\n":"")),1===f||2===f)e+=$text(a)+("block"===$style.get(a,"display")||"br"===a.tagName.toLowerCase()?"\n":"");return e})},$className:{add:function(a,b){return d(a,function(a){if(""===a.className)a.className=b;else{var e=a.className,f=[];$each(b.split(v),function(a,b){RegExp("\\b("+b+")\\b").test(e)||f.push(" "+b)});a.className+=f.join("")}return a})},set:function(a,b){return d(a,function(a){a.className=b;return a})},has:function(a,b){return RegExp("\\b("+b.split(v).join("|")+")\\b").test(a.className)},remove:function(a,b){return d(a,function(a){a.className=b?$string.trim(a.className.replace(RegExp("\\b("+b.split(v).join("|")+")\\b","g"),"").split(v).join(" ")):"";return a})}},$hide:function(a,b,c){I(a,"hide",b,c)},$show:function(a,b,c){I(a,"show",b,c)},$toggle:function(a,b,c){return d(a,function(a){"none"===$style.get(a,"display")?$show(a,b,c):$hide(a,b,c)})},$animate:p,$fadeout:function(a,b,c){return d(a,function(a){$animate(a,{opacity:{from:1,to:0}},b||500,c)})},$fadein:function(a,b,c){return d(a,function(a){$animate(a,{opacity:{from:0,to:1}},b||500,c)})},$cookie:{get:function(a){for(var b=j.cookie.split("; "),c=0,e=b.length,f;c<e;c++)if(f=b[c].split("="),f[0]===a)return a=decodeURIComponent(f[1]),$json.isJSON(a)?$json.decode(a):a+"";return null},set:function(a,b,c){if("object"===typeof a)return c=b,$each(a,function(a,b){$cookie.set(a,b,c)});var e=new Date;e.setTime(e.getTime());c=c?";expires="+(new Date(e.getTime()+864E5*c)).toGMTString():"";b="object"===typeof b?$json.encode(b):b;return j.cookie=a+"="+$url(b)+c+";path=/"},remove:function(){$each(arguments,function(a,b){$cookie.set(b,"",-1)});return!0}},$json:ba,$ajax:function(a,b){"object"===typeof a&&(b=a,a=l);b=b||{};var c=r.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;a=a||b.url;var e=[],d;b.data&&$each(b.data,function(a,b){e.push(J(a,b))});d=e.join("&").replace(/%20/g,"+");"GET"===b.type?(c.open("GET",a+(Q.test(a)?"&":"?")+d,!0),d=null):c.open(b.type||"POST",a,!0);c.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");b.header&&$each(b.header,function(a,b){c.setRequestHeader(a,b)});c.send(d);c.onreadystatechange=function(){4===c.readyState&&(200===c.status&&b.success?(d=c.responseText,b.success(""!==d&&$json.isJSON(d)?$json.decode(d):d)):b.error&&b.error(c.status))}},$require:function(a,b){var c=[],d;$each(a,function(a,g){E[g]||(E[g]=!0,c.push(g),d=/\.css[^\.]*$/ig.test(g)?$new("link",{type:"text/css",rel:"stylesheet",href:g}):$new("script",{type:"text/javascript",async:!0,src:g}),d.onload=d.onreadystatechange=function(a){if("load"===a.type||/loaded|complete/.test(d.readyState))c.splice(c.indexOf(g),1),0===c.length&&b&&b()},$append(j.head||$tag(j,"head")[0]||s,d))})},$template:function(a,b){var c=F[a];c||(c="var s='';s+='"+a.replace(/[\r\t\n]/g," ").split("'").join("\\'").split("\t").join("'").replace(/\{\{#([\w]*)\}\}(.*)\{\{\/(\1)\}\}/ig,function(a,b,c){return"';var i=0,l=data."+b+".length,d=data."+b+";for(;i<l;i++){s+='"+c.replace(/\{\{(\.|this)\}\}/g,"'+d[i]+'").replace(/\{\{([\w]*)\}\}/g,"'+d[i].$1+'")+"'}s+='"}).replace(/\{\{(.+?)\}\}/g,"'+data.$1+'")+"';return s;",F[a]=c);return b?(new Function("data",c))(b):new Function("data",c)},$url:function(a){return encodeURIComponent(a)},$rand:function(a,b){return Math.floor(Math.random()*(b-a+1)+a)},$browser:w},B;for(B in g)r[B]=g[B];g.version="1.1";r.Qatrix=g;$ready(function(){j.querySelectorAll||(g.Qselector=$append(j.body,$new("style")));r.localStorage||(g.storage=$append(j.body,$new("link",{style:{behavior:"url(#default#userData)"}})))});"function"===typeof define&&define.amd&&define("qatrix",[],g)})(window,document);